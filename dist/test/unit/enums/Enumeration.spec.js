/* global describe, it */
'use strict';

const chai = require('chai');

chai.use(require('dirty-chai'));
const expect = chai.expect;

const Enumeration = require('../../../main');

const {
  ClassNotExtendableError
} = require('@northscaler/error-support');

const EnumClassNotInstantiableError = require('../../../main').errors.EnumClassNotInstantiableError;

describe('unit tests of Enumeration', function () {
  it('should create a new enum', () => {
    const Boolean = Enumeration.new({
      name: 'BooleanValue',
      values: ['TRUE', 'FALSE']
    });
    const OneTwo = Enumeration.new({
      name: 'OneTwo',
      values: {
        ONE: {
          one() {
            return 1;
          },

          get eleven() {
            return this.one() + 10;
          }

        },
        TWO: {
          two() {
            return 2;
          },

          get twelve() {
            return this.two() + 10;
          }

        }
      }
    }, {
      myName: function () {
        return `my name is ${this.name}`;
      },

      get myNameIsThisDotMyNameAsProp() {
        return `${this.myName()} as prop`;
      },

      get myNameIsThisDotNameAsProp() {
        return `my name is ${this.name} as prop`;
      }

    });
    expect(Boolean.TRUE).to.be.ok();
    expect(Boolean.FALSE).to.be.ok();
    expect(Boolean.BOGUS).not.to.be.ok();
    expect(Boolean.isInstance(Boolean.TRUE)).to.be.true();
    expect(Boolean.isClass(Boolean)).to.be.true();
    expect(OneTwo.isInstance(OneTwo.ONE)).to.be.true();
    expect(OneTwo.isClass(OneTwo)).to.be.true();
    expect(OneTwo.isInstance(Boolean.TRUE)).to.be.false();
    expect(OneTwo.isClass(Boolean)).to.be.false();
    expect(OneTwo.ONE.myName()).to.equal('my name is ONE');
    expect(OneTwo.ONE.one()).to.equal(1);
    expect(OneTwo.ONE.eleven).to.equal(11);
    expect(OneTwo.ONE.two).not.to.be.ok();
    expect(OneTwo.ONE.twelve).not.to.be.ok();
    expect(OneTwo.TWO.myName()).to.equal('my name is TWO');
    expect(OneTwo.TWO.two()).to.equal(2);
    expect(OneTwo.TWO.twelve).to.equal(12);
    expect(OneTwo.TWO.one).not.to.be.ok();
    expect(OneTwo.TWO.eleven).not.to.be.ok();
    expect(Boolean.of(Boolean.TRUE)).to.equal(Boolean.TRUE);
    expect(Boolean.of('TRUE')).to.equal(Boolean.TRUE);
    expect(Boolean.of(0)).to.equal(Boolean.TRUE);
    expect(() => Boolean.of('BOGUS')).to.throw(Boolean.$ERROR$).that.has.property('code').that.equals('E_UNKNOWN_BOOLEAN_VALUE_ENUM_VALUE');
    expect(OneTwo.ONE.myNameIsThisDotMyNameAsProp).to.equal('my name is ONE as prop');
    expect(OneTwo.ONE.myNameIsThisDotNameAsProp).to.equal('my name is ONE as prop');
    expect(OneTwo.TWO.myNameIsThisDotMyNameAsProp).to.equal('my name is TWO as prop');
    expect(OneTwo.TWO.myNameIsThisDotNameAsProp).to.equal('my name is TWO as prop');
    expect(Enumeration.isEnumerationClass(Boolean)).to.be.true();
    expect(Enumeration.isEnumerationClass(OneTwo)).to.be.true();
    expect(Enumeration.isEnumerationClass(OneTwo.ONE)).to.be.false();
    expect(Enumeration.isEnumerationInstance(OneTwo.ONE)).to.be.true();
  });
  it('should not allow enum classes to be instantiable', function () {
    const It = Enumeration.new({
      name: 'It',
      values: ['THING']
    });
    expect(() => new It()).to.throw(EnumClassNotInstantiableError);
  });
  it('should not allow extensions of enum classes', function () {
    const Super = Enumeration.new({
      name: 'Super',
      values: ['SUPER']
    });

    class Sub extends Super {}

    expect(() => new Sub()).to.throw(ClassNotExtendableError);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90ZXN0L3VuaXQvZW51bXMvRW51bWVyYXRpb24uc3BlYy5qcyJdLCJuYW1lcyI6WyJjaGFpIiwicmVxdWlyZSIsInVzZSIsImV4cGVjdCIsIkVudW1lcmF0aW9uIiwiQ2xhc3NOb3RFeHRlbmRhYmxlRXJyb3IiLCJFbnVtQ2xhc3NOb3RJbnN0YW50aWFibGVFcnJvciIsImVycm9ycyIsImRlc2NyaWJlIiwiaXQiLCJCb29sZWFuIiwibmV3IiwibmFtZSIsInZhbHVlcyIsIk9uZVR3byIsIk9ORSIsIm9uZSIsImVsZXZlbiIsIlRXTyIsInR3byIsInR3ZWx2ZSIsIm15TmFtZSIsIm15TmFtZUlzVGhpc0RvdE15TmFtZUFzUHJvcCIsIm15TmFtZUlzVGhpc0RvdE5hbWVBc1Byb3AiLCJUUlVFIiwidG8iLCJiZSIsIm9rIiwiRkFMU0UiLCJCT0dVUyIsIm5vdCIsImlzSW5zdGFuY2UiLCJ0cnVlIiwiaXNDbGFzcyIsImZhbHNlIiwiZXF1YWwiLCJvZiIsInRocm93IiwiJEVSUk9SJCIsInRoYXQiLCJoYXMiLCJwcm9wZXJ0eSIsImVxdWFscyIsImlzRW51bWVyYXRpb25DbGFzcyIsImlzRW51bWVyYXRpb25JbnN0YW5jZSIsIkl0IiwiU3VwZXIiLCJTdWIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQUQsSUFBSSxDQUFDRSxHQUFMLENBQVNELE9BQU8sQ0FBQyxZQUFELENBQWhCO0FBQ0EsTUFBTUUsTUFBTSxHQUFHSCxJQUFJLENBQUNHLE1BQXBCOztBQUVBLE1BQU1DLFdBQVcsR0FBR0gsT0FBTyxDQUFDLGVBQUQsQ0FBM0I7O0FBQ0EsTUFBTTtBQUFFSSxFQUFBQTtBQUFGLElBQThCSixPQUFPLENBQUMsNEJBQUQsQ0FBM0M7O0FBQ0EsTUFBTUssNkJBQTZCLEdBQUdMLE9BQU8sQ0FBQyxlQUFELENBQVAsQ0FBeUJNLE1BQXpCLENBQWdDRCw2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LENBQUNPLEdBQVosQ0FBZ0I7QUFBRUMsTUFBQUEsSUFBSSxFQUFFLE9BQVI7QUFBaUJDLE1BQUFBLE1BQU0sRUFBRSxDQUFDLE9BQUQ7QUFBekIsS0FBaEIsQ0FBZDs7QUFFQSxVQUFNa0MsR0FBTixTQUFrQkQsS0FBbEIsQ0FBd0I7O0FBR3hCM0MsSUFBQUEsTUFBTSxDQUFDLE1BQU0sSUFBSTRDLEdBQUosRUFBUCxDQUFOLENBQXdCdEIsRUFBeEIsQ0FBMkJZLEtBQTNCLENBQWlDaEMsdUJBQWpDO0FBQ0QsR0FQQyxDQUFGO0FBUUQsQ0FwRk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBkZXNjcmliZSwgaXQgKi9cbid1c2Ugc3RyaWN0J1xuXG5jb25zdCBjaGFpID0gcmVxdWlyZSgnY2hhaScpXG5jaGFpLnVzZShyZXF1aXJlKCdkaXJ0eS1jaGFpJykpXG5jb25zdCBleHBlY3QgPSBjaGFpLmV4cGVjdFxuXG5jb25zdCBFbnVtZXJhdGlvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL21haW4nKVxuY29uc3QgeyBDbGFzc05vdEV4dGVuZGFibGVFcnJvciB9ID0gcmVxdWlyZSgnQG5vcnRoc2NhbGVyL2Vycm9yLXN1cHBvcnQnKVxuY29uc3QgRW51bUNsYXNzTm90SW5zdGFudGlhYmxlRXJyb3IgPSByZXF1aXJlKCcuLi8uLi8uLi9tYWluJykuZXJyb3JzLkVudW1DbGFzc05vdEluc3RhbnRpYWJsZUVycm9yXG5cbmRlc2NyaWJlKCd1bml0IHRlc3RzIG9mIEVudW1lcmF0aW9uJywgZnVuY3Rpb24gKCkge1xuICBpdCgnc2hvdWxkIGNyZWF0ZSBhIG5ldyBlbnVtJywgKCkgPT4ge1xuICAgIGNvbnN0IEJvb2xlYW4gPSBFbnVtZXJhdGlvbi5uZXcoeyBuYW1lOiAnQm9vbGVhblZhbHVlJywgdmFsdWVzOiBbJ1RSVUUnLCAnRkFMU0UnXSB9KVxuICAgIGNvbnN0IE9uZVR3byA9IEVudW1lcmF0aW9uLm5ldyh7XG4gICAgICBuYW1lOiAnT25lVHdvJyxcbiAgICAgIHZhbHVlczoge1xuICAgICAgICBPTkU6IHtcbiAgICAgICAgICBvbmUgKCkge1xuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldCBlbGV2ZW4gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25lKCkgKyAxMFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgVFdPOiB7XG4gICAgICAgICAgdHdvICgpIHtcbiAgICAgICAgICAgIHJldHVybiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXQgdHdlbHZlICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR3bygpICsgMTBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBteU5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGBteSBuYW1lIGlzICR7dGhpcy5uYW1lfWBcbiAgICAgIH0sXG4gICAgICBnZXQgbXlOYW1lSXNUaGlzRG90TXlOYW1lQXNQcm9wICgpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubXlOYW1lKCl9IGFzIHByb3BgXG4gICAgICB9LFxuICAgICAgZ2V0IG15TmFtZUlzVGhpc0RvdE5hbWVBc1Byb3AgKCkge1xuICAgICAgICByZXR1cm4gYG15IG5hbWUgaXMgJHt0aGlzLm5hbWV9IGFzIHByb3BgXG4gICAgICB9XG4gICAgfSlcblxuICAgIGV4cGVjdChCb29sZWFuLlRSVUUpLnRvLmJlLm9rKClcbiAgICBleHBlY3QoQm9vbGVhbi5GQUxTRSkudG8uYmUub2soKVxuICAgIGV4cGVjdChCb29sZWFuLkJPR1VTKS5ub3QudG8uYmUub2soKVxuICAgIGV4cGVjdChCb29sZWFuLmlzSW5zdGFuY2UoQm9vbGVhbi5UUlVFKSkudG8uYmUudHJ1ZSgpXG4gICAgZXhwZWN0KEJvb2xlYW4uaXNDbGFzcyhCb29sZWFuKSkudG8uYmUudHJ1ZSgpXG4gICAgZXhwZWN0KE9uZVR3by5pc0luc3RhbmNlKE9uZVR3by5PTkUpKS50by5iZS50cnVlKClcbiAgICBleHBlY3QoT25lVHdvLmlzQ2xhc3MoT25lVHdvKSkudG8uYmUudHJ1ZSgpXG4gICAgZXhwZWN0KE9uZVR3by5pc0luc3RhbmNlKEJvb2xlYW4uVFJVRSkpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoT25lVHdvLmlzQ2xhc3MoQm9vbGVhbikpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoT25lVHdvLk9ORS5teU5hbWUoKSkudG8uZXF1YWwoJ215IG5hbWUgaXMgT05FJylcbiAgICBleHBlY3QoT25lVHdvLk9ORS5vbmUoKSkudG8uZXF1YWwoMSlcbiAgICBleHBlY3QoT25lVHdvLk9ORS5lbGV2ZW4pLnRvLmVxdWFsKDExKVxuICAgIGV4cGVjdChPbmVUd28uT05FLnR3bykubm90LnRvLmJlLm9rKClcbiAgICBleHBlY3QoT25lVHdvLk9ORS50d2VsdmUpLm5vdC50by5iZS5vaygpXG4gICAgZXhwZWN0KE9uZVR3by5UV08ubXlOYW1lKCkpLnRvLmVxdWFsKCdteSBuYW1lIGlzIFRXTycpXG4gICAgZXhwZWN0KE9uZVR3by5UV08udHdvKCkpLnRvLmVxdWFsKDIpXG4gICAgZXhwZWN0KE9uZVR3by5UV08udHdlbHZlKS50by5lcXVhbCgxMilcbiAgICBleHBlY3QoT25lVHdvLlRXTy5vbmUpLm5vdC50by5iZS5vaygpXG4gICAgZXhwZWN0KE9uZVR3by5UV08uZWxldmVuKS5ub3QudG8uYmUub2soKVxuICAgIGV4cGVjdChCb29sZWFuLm9mKEJvb2xlYW4uVFJVRSkpLnRvLmVxdWFsKEJvb2xlYW4uVFJVRSlcbiAgICBleHBlY3QoQm9vbGVhbi5vZignVFJVRScpKS50by5lcXVhbChCb29sZWFuLlRSVUUpXG4gICAgZXhwZWN0KEJvb2xlYW4ub2YoMCkpLnRvLmVxdWFsKEJvb2xlYW4uVFJVRSlcbiAgICBleHBlY3QoKCkgPT4gQm9vbGVhbi5vZignQk9HVVMnKSkudG8udGhyb3coQm9vbGVhbi4kRVJST1IkKVxuICAgICAgLnRoYXQuaGFzLnByb3BlcnR5KCdjb2RlJykudGhhdC5lcXVhbHMoJ0VfVU5LTk9XTl9CT09MRUFOX1ZBTFVFX0VOVU1fVkFMVUUnKVxuICAgIGV4cGVjdChPbmVUd28uT05FLm15TmFtZUlzVGhpc0RvdE15TmFtZUFzUHJvcCkudG8uZXF1YWwoJ215IG5hbWUgaXMgT05FIGFzIHByb3AnKVxuICAgIGV4cGVjdChPbmVUd28uT05FLm15TmFtZUlzVGhpc0RvdE5hbWVBc1Byb3ApLnRvLmVxdWFsKCdteSBuYW1lIGlzIE9ORSBhcyBwcm9wJylcbiAgICBleHBlY3QoT25lVHdvLlRXTy5teU5hbWVJc1RoaXNEb3RNeU5hbWVBc1Byb3ApLnRvLmVxdWFsKCdteSBuYW1lIGlzIFRXTyBhcyBwcm9wJylcbiAgICBleHBlY3QoT25lVHdvLlRXTy5teU5hbWVJc1RoaXNEb3ROYW1lQXNQcm9wKS50by5lcXVhbCgnbXkgbmFtZSBpcyBUV08gYXMgcHJvcCcpXG5cbiAgICBleHBlY3QoRW51bWVyYXRpb24uaXNFbnVtZXJhdGlvbkNsYXNzKEJvb2xlYW4pKS50by5iZS50cnVlKClcbiAgICBleHBlY3QoRW51bWVyYXRpb24uaXNFbnVtZXJhdGlvbkNsYXNzKE9uZVR3bykpLnRvLmJlLnRydWUoKVxuICAgIGV4cGVjdChFbnVtZXJhdGlvbi5pc0VudW1lcmF0aW9uQ2xhc3MoT25lVHdvLk9ORSkpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoRW51bWVyYXRpb24uaXNFbnVtZXJhdGlvbkluc3RhbmNlKE9uZVR3by5PTkUpKS50by5iZS50cnVlKClcbiAgfSlcblxuICBpdCgnc2hvdWxkIG5vdCBhbGxvdyBlbnVtIGNsYXNzZXMgdG8gYmUgaW5zdGFudGlhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IEl0ID0gRW51bWVyYXRpb24ubmV3KHsgbmFtZTogJ0l0JywgdmFsdWVzOiBbJ1RISU5HJ10gfSlcblxuICAgIGV4cGVjdCgoKSA9PiBuZXcgSXQoKSkudG8udGhyb3coRW51bUNsYXNzTm90SW5zdGFudGlhYmxlRXJyb3IpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgZXh0ZW5zaW9ucyBvZiBlbnVtIGNsYXNzZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgU3VwZXIgPSBFbnVtZXJhdGlvbi5uZXcoeyBuYW1lOiAnU3VwZXInLCB2YWx1ZXM6IFsnU1VQRVInXSB9KVxuXG4gICAgY2xhc3MgU3ViIGV4dGVuZHMgU3VwZXIge1xuICAgIH1cblxuICAgIGV4cGVjdCgoKSA9PiBuZXcgU3ViKCkpLnRvLnRocm93KENsYXNzTm90RXh0ZW5kYWJsZUVycm9yKVxuICB9KVxufSlcbiJdfQ==