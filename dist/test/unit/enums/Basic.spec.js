/* global describe, it */
'use strict';

var assert = _interopRequireWildcard(require("assert"));

var _errorSupport = require("@northscaler/error-support");

var _main = _interopRequireDefault(require("../../../main"));

var _EnumClassNotInstantiableError = _interopRequireDefault(require("../../../main/errors/EnumClassNotInstantiableError"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

describe('Enumeration: simple', function () {
  const Color = _main.default.new({
    name: 'Color',
    values: ['RED', 'GREEN', 'BLUE']
  });

  it('instanceof', () => {
    assert.ok(Color.RED instanceof Color);
  });
  it('toString', () => {
    assert.strictEqual(String(Color.RED), 'Color.RED');
  });
  it('name', () => {
    assert.strictEqual(Color.RED.name, 'RED');
  });
  it('ordinal', () => {
    assert.strictEqual(Color.GREEN.ordinal, 1);
  });
  it('of', () => {
    assert.strictEqual(Color.of('BLUE'), Color.BLUE);
  });
  it('values', () => {
    assert.deepStrictEqual(Color.values, [Color.RED, Color.GREEN, Color.BLUE]);
  });
  it('Class can’t be instantiated', () => {
    try {
      // eslint-disable-next-line no-new
      new Color();
      assert.fail('should have thrown EnumClassNotInstantiableError');
    } catch (e) {
      assert.ok(e instanceof _EnumClassNotInstantiableError.default);
    }
  });
  it('Class can’t be extended', () => {
    try {
      class Subcolor extends Color {} // eslint-disable-next-line no-new


      new Subcolor();
      assert.fail('should have thrown ClassNotExtendableError');
    } catch (e) {
      assert.ok(e instanceof _errorSupport.ClassNotExtendableError);
    }
  });
});
describe('Enumeration: custom constructor and instance method', function () {
  const TicTacToePiece = _main.default.new({
    name: 'TicTacToePiece',
    values: {
      O: {
        get inverse() {
          return TicTacToePiece.X;
        },

        oh() {
          return 'o';
        }

      },
      X: {
        get inverse() {
          return TicTacToePiece.O;
        },

        ex() {
          return 'x';
        }

      }
    }
  });

  it('Custom instance method', () => {
    assert.strictEqual(TicTacToePiece.X.inverse, TicTacToePiece.O);
    assert.strictEqual(TicTacToePiece.O.inverse, TicTacToePiece.X);
    assert.strictEqual(TicTacToePiece.X.ex(), 'x');
    assert.strictEqual(TicTacToePiece.O.oh(), 'o');
    assert.ok(!TicTacToePiece.X.oh);
    assert.ok(!TicTacToePiece.O.ex);
  });
  it('toString', () => {
    assert.strictEqual(String(TicTacToePiece.O), 'TicTacToePiece.O');
  });
  it('ordinal', () => {
    assert.strictEqual(TicTacToePiece.O.ordinal, 0);
    assert.strictEqual(TicTacToePiece.X.ordinal, 1);
  });
});
describe('Enumeration: custom prototype method', function () {
  const Day = _main.default.new({
    name: 'Day',
    values: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY']
  }, // 1
  {
    isWeekend() {
      return this === Day.SATURDAY || this === Day.SUNDAY;
    },

    isWeekday() {
      return !this.isWeekend();
    }

  });

  it('Custom prototype method', () => {
    assert.strictEqual(Day.SATURDAY.isWeekend(), true);
    assert.strictEqual(Day.MONDAY.isWeekday(), true);
    assert.strictEqual(Day.SUNDAY.isWeekday(), false);
    assert.strictEqual(Day.MONDAY.isWeekend(), false);
  });
});
describe('Enumeration: flags', function () {
  const Mode = _main.default.new({
    name: 'Mode',
    values: {
      USER_R: {
        n: 0b100000000
      },
      USER_W: {
        n: 0b010000000
      },
      USER_X: {
        n: 0b001000000
      },
      GROUP_R: {
        n: 0b000100000
      },
      GROUP_W: {
        n: 0b000010000
      },
      GROUP_X: {
        n: 0b000001000
      },
      ALL_R: {
        n: 0b000000100
      },
      ALL_W: {
        n: 0b000000010
      },
      ALL_X: {
        n: 0b000000001
      }
    }
  });

  it('Enumeration: using the flags', () => {
    assert.strictEqual(Mode.USER_R.n | Mode.USER_W.n | Mode.USER_X.n | Mode.GROUP_R.n | Mode.GROUP_X.n | Mode.ALL_R.n | Mode.ALL_X.n, 0o755);
    assert.strictEqual(Mode.USER_R.n | Mode.USER_W.n | Mode.USER_X.n | Mode.GROUP_R.n, 0o740);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90ZXN0L3VuaXQvZW51bXMvQmFzaWMuc3BlYy5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIkNvbG9yIiwiRW51bWVyYXRpb24iLCJuZXciLCJuYW1lIiwidmFsdWVzIiwiaXQiLCJhc3NlcnQiLCJvayIsIlJFRCIsInN0cmljdEVxdWFsIiwiU3RyaW5nIiwiR1JFRU4iLCJvcmRpbmFsIiwib2YiLCJCTFVFIiwiZGVlcFN0cmljdEVxdWFsIiwiZmFpbCIsImUiLCJFbnVtQ2xhc3NOb3RJbnN0YW50aWFibGVFcnJvciIsIlN1YmNvbG9yIiwiQ2xhc3NOb3RFeHRlbmRhYmxlRXJyb3IiLCJUaWNUYWNUb2VQaWVjZSIsIk8iLCJpbnZlcnNlIiwiWCIsIm9oIiwiZXgiLCJEYXkiLCJpc1dlZWtlbmQiLCJTQVRVUkRBWSIsIlNVTkRBWSIsImlzV2Vla2RheSIsIk1PTkRBWSIsIk1vZGUiLCJVU0VSX1IiLCJuIiwiVVNFUl9XIiwiVVNFUl9YIiwiR1JPVVBfUiIsIkdST1VQX1ciLCJHUk9VUF9YIiwiQUxMX1IiLCJBTExfVyIsIkFMTF9YIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBQSxRQUFRLENBQUMscUJBQUQsRUFBd0IsWUFBWTtBQUMxQyxRQUFNQyxLQUFLLEdBQUdDLGNBQVlDLEdBQVosQ0FBZ0I7QUFBRUMsSUFBQUEsSUFBSSxFQUFFLE9BQVI7QUFBaUJDLElBQUFBLE1BQU0sRUFBRSxDQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLE1BQWpCO0FBQXpCLEdBQWhCLENBQWQ7O0FBRUFDLEVBQUFBLEVBQUUsQ0FBQyxZQUFELEVBQWUsTUFBTTtBQUNyQkMsSUFBQUEsTUFBTSxDQUFDQyxFQUFQLENBQVVQLEtBQUssQ0FBQ1EsR0FBTixZQUFxQlIsS0FBL0I7QUFDRCxHQUZDLENBQUY7QUFJQUssRUFBQUEsRUFBRSxDQUFDLFVBQUQsRUFBYSxNQUFNO0FBQ25CQyxJQUFB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ZSBzdHJpY3QnXG5cbmltcG9ydCAqIGFzIGFzc2VydCBmcm9tICdhc3NlcnQnXG5pbXBvcnQgeyBDbGFzc05vdEV4dGVuZGFibGVFcnJvciB9IGZyb20gJ0Bub3J0aHNjYWxlci9lcnJvci1zdXBwb3J0J1xuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4uLy4uLy4uL21haW4nXG5pbXBvcnQgRW51bUNsYXNzTm90SW5zdGFudGlhYmxlRXJyb3IgZnJvbSAnLi4vLi4vLi4vbWFpbi9lcnJvcnMvRW51bUNsYXNzTm90SW5zdGFudGlhYmxlRXJyb3InXG5cbmRlc2NyaWJlKCdFbnVtZXJhdGlvbjogc2ltcGxlJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBDb2xvciA9IEVudW1lcmF0aW9uLm5ldyh7IG5hbWU6ICdDb2xvcicsIHZhbHVlczogWydSRUQnLCAnR1JFRU4nLCAnQkxVRSddIH0pXG5cbiAgaXQoJ2luc3RhbmNlb2YnLCAoKSA9PiB7XG4gICAgYXNzZXJ0Lm9rKENvbG9yLlJFRCBpbnN0YW5jZW9mIENvbG9yKVxuICB9KVxuXG4gIGl0KCd0b1N0cmluZycsICgpID0+IHtcbiAgICBhc3NlcnQuc3RyaWN0RXF1YWwoU3RyaW5nKENvbG9yLlJFRCksICdDb2xvci5SRUQnKVxuICB9KVxuXG4gIGl0KCduYW1lJywgKCkgPT4ge1xuICAgIGFzc2VydC5zdHJpY3RFcXVhbChDb2xvci5SRUQubmFtZSwgJ1JFRCcpXG4gIH0pXG5cbiAgaXQoJ29yZGluYWwnLCAoKSA9PiB7XG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKENvbG9yLkdSRUVOLm9yZGluYWwsIDEpXG4gIH0pXG5cbiAgaXQoJ29mJywgKCkgPT4ge1xuICAgIGFzc2VydC5zdHJpY3RFcXVhbChDb2xvci5vZignQkxVRScpLCBDb2xvci5CTFVFKVxuICB9KVxuXG4gIGl0KCd2YWx1ZXMnLCAoKSA9PiB7XG4gICAgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChDb2xvci52YWx1ZXMsIFtDb2xvci5SRUQsIENvbG9yLkdSRUVOLCBDb2xvci5CTFVFXSlcbiAgfSlcblxuICBpdCgnQ2xhc3MgY2Fu4oCZdCBiZSBpbnN0YW50aWF0ZWQnLCAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXdcbiAgICAgIG5ldyBDb2xvcigpXG4gICAgICBhc3NlcnQuZmFpbCgnc2hvdWxkIGhhdmUgdGhyb3duIEVudW1DbGFzc05vdEluc3RhbnRpYWJsZUVycm9yJylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBhc3NlcnQub2soZSBpbnN0YW5jZW9mIEVudW1DbGFzc05vdEluc3RhbnRpYWJsZUVycm9yKVxuICAgIH1cbiAgfSlcblxuICBpdCgnQ2xhc3MgY2Fu4oCZdCBiZSBleHRlbmRlZCcsICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY2xhc3MgU3ViY29sb3IgZXh0ZW5kcyBDb2xvciB7fVxuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3XG4gICAgICBuZXcgU3ViY29sb3IoKVxuXG4gICAgICBhc3NlcnQuZmFpbCgnc2hvdWxkIGhhdmUgdGhyb3duIENsYXNzTm90RXh0ZW5kYWJsZUVycm9yJylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBhc3NlcnQub2soZSBpbnN0YW5jZW9mIENsYXNzTm90RXh0ZW5kYWJsZUVycm9yKVxuICAgIH1cbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdFbnVtZXJhdGlvbjogY3VzdG9tIGNvbnN0cnVjdG9yIGFuZCBpbnN0YW5jZSBtZXRob2QnLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IFRpY1RhY1RvZVBpZWNlID0gRW51bWVyYXRpb24ubmV3KHtcbiAgICBuYW1lOiAnVGljVGFjVG9lUGllY2UnLFxuICAgIHZhbHVlczoge1xuICAgICAgTzoge1xuICAgICAgICBnZXQgaW52ZXJzZSAoKSB7IHJldHVybiBUaWNUYWNUb2VQaWVjZS5YIH0sXG4gICAgICAgIG9oICgpIHsgcmV0dXJuICdvJyB9XG4gICAgICB9LFxuICAgICAgWDoge1xuICAgICAgICBnZXQgaW52ZXJzZSAoKSB7IHJldHVybiBUaWNUYWNUb2VQaWVjZS5PIH0sXG4gICAgICAgIGV4ICgpIHsgcmV0dXJuICd4JyB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGl0KCdDdXN0b20gaW5zdGFuY2UgbWV0aG9kJywgKCkgPT4ge1xuICAgIGFzc2VydC5zdHJpY3RFcXVhbChUaWNUYWNUb2VQaWVjZS5YLmludmVyc2UsIFRpY1RhY1RvZVBpZWNlLk8pXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKFRpY1RhY1RvZVBpZWNlLk8uaW52ZXJzZSwgVGljVGFjVG9lUGllY2UuWClcbiAgICBhc3NlcnQuc3RyaWN0RXF1YWwoVGljVGFjVG9lUGllY2UuWC5leCgpLCAneCcpXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKFRpY1RhY1RvZVBpZWNlLk8ub2goKSwgJ28nKVxuICAgIGFzc2VydC5vayghVGljVGFjVG9lUGllY2UuWC5vaClcbiAgICBhc3NlcnQub2soIVRpY1RhY1RvZVBpZWNlLk8uZXgpXG4gIH0pXG5cbiAgaXQoJ3RvU3RyaW5nJywgKCkgPT4ge1xuICAgIGFzc2VydC5zdHJpY3RFcXVhbChTdHJpbmcoVGljVGFjVG9lUGllY2UuTyksICdUaWNUYWNUb2VQaWVjZS5PJylcbiAgfSlcblxuICBpdCgnb3JkaW5hbCcsICgpID0+IHtcbiAgICBhc3NlcnQuc3RyaWN0RXF1YWwoVGljVGFjVG9lUGllY2UuTy5vcmRpbmFsLCAwKVxuICAgIGFzc2VydC5zdHJpY3RFcXVhbChUaWNUYWNUb2VQaWVjZS5YLm9yZGluYWwsIDEpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnRW51bWVyYXRpb246IGN1c3RvbSBwcm90b3R5cGUgbWV0aG9kJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBEYXkgPSBFbnVtZXJhdGlvbi5uZXcoe1xuICAgIG5hbWU6ICdEYXknLFxuICAgIHZhbHVlczogWydNT05EQVknLCAnVFVFU0RBWScsICdXRURORVNEQVknLCAnVEhVUlNEQVknLCAnRlJJREFZJywgJ1NBVFVSREFZJywgJ1NVTkRBWSddXG4gIH0sXG4gIC8vIDFcbiAge1xuICAgIGlzV2Vla2VuZCAoKSB7XG4gICAgICByZXR1cm4gdGhpcyA9PT0gRGF5LlNBVFVSREFZIHx8IHRoaXMgPT09IERheS5TVU5EQVlcbiAgICB9LFxuICAgIGlzV2Vla2RheSAoKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaXNXZWVrZW5kKClcbiAgICB9XG4gIH0pXG5cbiAgaXQoJ0N1c3RvbSBwcm90b3R5cGUgbWV0aG9kJywgKCkgPT4ge1xuICAgIGFzc2VydC5zdHJpY3RFcXVhbChEYXkuU0FUVVJEQVkuaXNXZWVrZW5kKCksIHRydWUpXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKERheS5NT05EQVkuaXNXZWVrZGF5KCksIHRydWUpXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKERheS5TVU5EQVkuaXNXZWVrZGF5KCksIGZhbHNlKVxuICAgIGFzc2VydC5zdHJpY3RFcXVhbChEYXkuTU9OREFZLmlzV2Vla2VuZCgpLCBmYWxzZSlcbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdFbnVtZXJhdGlvbjogZmxhZ3MnLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IE1vZGUgPSBFbnVtZXJhdGlvbi5uZXcoe1xuICAgIG5hbWU6ICdNb2RlJyxcbiAgICB2YWx1ZXM6IHtcbiAgICAgIFVTRVJfUjoge1xuICAgICAgICBuOiAwYjEwMDAwMDAwMFxuICAgICAgfSxcbiAgICAgIFVTRVJfVzoge1xuICAgICAgICBuOiAwYjAxMDAwMDAwMFxuICAgICAgfSxcbiAgICAgIFVTRVJfWDoge1xuICAgICAgICBuOiAwYjAwMTAwMDAwMFxuICAgICAgfSxcbiAgICAgIEdST1VQX1I6IHtcbiAgICAgICAgbjogMGIwMDAxMDAwMDBcbiAgICAgIH0sXG4gICAgICBHUk9VUF9XOiB7XG4gICAgICAgIG46IDBiMDAwMDEwMDAwXG4gICAgICB9LFxuICAgICAgR1JPVVBfWDoge1xuICAgICAgICBuOiAwYjAwMDAwMTAwMFxuICAgICAgfSxcbiAgICAgIEFMTF9SOiB7XG4gICAgICAgIG46IDBiMDAwMDAwMTAwXG4gICAgICB9LFxuICAgICAgQUxMX1c6IHtcbiAgICAgICAgbjogMGIwMDAwMDAwMTBcbiAgICAgIH0sXG4gICAgICBBTExfWDoge1xuICAgICAgICBuOiAwYjAwMDAwMDAwMVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBpdCgnRW51bWVyYXRpb246IHVzaW5nIHRoZSBmbGFncycsICgpID0+IHtcbiAgICBhc3NlcnQuc3RyaWN0RXF1YWwoXG4gICAgICBNb2RlLlVTRVJfUi5uIHwgTW9kZS5VU0VSX1cubiB8IE1vZGUuVVNFUl9YLm4gfFxuICAgICAgTW9kZS5HUk9VUF9SLm4gfCBNb2RlLkdST1VQX1gubiB8XG4gICAgICBNb2RlLkFMTF9SLm4gfCBNb2RlLkFMTF9YLm4sXG4gICAgICAwbzc1NSlcblxuICAgIGFzc2VydC5zdHJpY3RFcXVhbChcbiAgICAgIE1vZGUuVVNFUl9SLm4gfCBNb2RlLlVTRVJfVy5uIHwgTW9kZS5VU0VSX1gubiB8IE1vZGUuR1JPVVBfUi5uLFxuICAgICAgMG83NDApXG4gIH0pXG59KVxuIl19